// Correct way to use color scale in D3 v7
var color = d3.scaleOrdinal(d3.schemeCategory20);

// Example usage
var svg = d3.select('#chart')
    .append("svg")
    .attr("width", w + padding.left + padding.right)
    .attr("height", h + padding.top + padding.bottom);

var container = svg.append("g")
    .attr("class", "chartholder")
    .attr("transform", "translate(" + (w/2 + padding.left) + "," + (h/2 + padding.top) + ")");

var vis = container.append("g");

var pie = d3.pie().sort(null).value(function(d) { return 1; });
var arc = d3.arc().outerRadius(r);
var arcs = vis.selectAll("g.slice")
    .data(pie(data))
    .enter()
    .append("g")
    .attr("class", "slice");

arcs.append("path")
    .attr("fill", function(d, i) { return color(i); })
    .attr("d", arc);

// Add text, etc.
